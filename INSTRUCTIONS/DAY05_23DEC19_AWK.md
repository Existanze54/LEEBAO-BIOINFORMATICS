# LEEBAO-BIOINFORMATICS

Хакатон по биоинформатике Лаборатории экологии и эволюционной биологии водных организмов ДВФУ

## ДЕНЬ 05. AWK ПАРСИНГ.

## СОДЕРЖАНИЕ

1. [ОПРЕДЕЛЕНИЯ]()
2. [СВОЙСТВА AWK]()
3. [СИНТАКСИС AWK]()
4. [КОМАНДЫ AWK]()
5. [УПРАЖНЕНИЯ]()

### 1. ОПРЕДЕЛЕНИЯ

   **Регулярные выражения** – язык поиска шаблонов (англ. pattern – патерн) и осуществление манипуляций с текстовыми (строчными) данными, основанный на использовании специальных метасимволов, включая символы подстановки  
   **Символ подстановки** (англ. wildcard – символ-джокер) – метасимволы, используемые для поиска и замены текстовых (строчных) данных на основе шаблонов  
   **Парсинг** (от англ. parsing - "разбор") – жаргонный термин, который в компьютерной науке обозначает синтаксический анализ текстовых (строчных) типов данных и подобных структур, включая исходные коды различных языков программирования  
   **Команда** – условный термин, обозначающий руководство для действия в различных языках программирования  
   **AWK** – скриптовый язык для анализа текстовых (строчных) данных по заданным шаблонам, включая регулярные выражения  

### 2. СВОЙСТВА AWK

* определение переменных
* операции с числовыми и текстовыми данными
* условные операторы и операторы цикла
* вывод текстовых данных

##### A. Операции AWK

   (a) Сканирует файл по строкам  
   (b) Каждую строку разбивает на поля  
   (c) Сравнивает строки или поля с заданными шаблонами  
   (d) Выполняет действия с выбранными строками или полями  

##### B. AWK парсинг

   (a) Преобразование данных  
   (b) Составление текстовых отчетов по заданному формату  

##### С. Возможные операции в AWK

   (a) Создание шаблонов  
   (b) Операции с числовыми и текстовыми данными  
   (с) Условный оператор IF  
   (d) Операторы цикла DO, FOR и WHILE  

### 3. СИНТАКСИС AWK

```
awk опции команды файл
awk '{скрипт}'
awk '{команда1 ; команда2; ...}'
```

### 4. ОПЦИИ AWK

   `-F сепаратор` – сепаратор полей  
   `-f файл` – файл с инструкциями для команд AWK (скрипт)  
   `-v переменная=значение` – определение переменных  

### 5. РАБОТА с AWK

##### Действия

   `{...}` – действие  
   `BEGIN{...}` – выполнение действия перед чтением файла  
   `END{...}` – выполнение действия после чтения файла  
   `(...)` – шаблон и условия для выполнения действия  
   `# ...` – комментарии в скрипте AWK  

##### Команды

   `{print...}` – вывод данных в консоль  
   `{printf(...)}` – вывод данных в консоль по заданному шаблону  
   `length(...)` – число символов в поле  

##### Переменные, строки и поля

   `$0` – вся строка  
   `$1` – первое поле в строке  
   `$n` – n-е поле в строке  
   `NF` – число полей в строке  
   `$NF` – последнее поле в строке  
   `NR` – число строк в файле  

##### Операторы сравнения

   `>` – больше чем  
   `>=` – больше чем или равно   
   `<` – меньше чем  
   `<=` – меньше чем или равно  
   `==` – равно  
   `!=` – неравно  
   `~` - совпадение символьных строк/полей  
   `!~` - несовпадение символьных строк/полей  

##### Операторы выражений

   `=`,`+=`,`-=`,`*=`,`/=`,`%=`,`^=` – различные операторы присвоения  
   `x?y:z` – если x, то y, иначе z  
   `x || y` – x ИЛИ y (возвращает 1, иначе 0)  
   `x && y` – x И y (возвращает 1, иначе 0)  
   

### 6. ПРИМЕРЫ
```
awk '{print "Hello world!"}'				# Ctr+D чтобы выйти из программы
awk -F: '{print $1}' /etc/passwd			# смотрим все учетные записи в системе
echo "Hello MASHA" | awk '{$2="PETYA"; print $0}'
echo $PATH | awk -F: '{print $1}'
awk -F: '{print $1,$NF}' /etc/passwd			# вывод первого и последнего поля
awk 'NR==3, NR==6 {print NR,$0}' /etc/passwd			# вывод c 3 по 6 строку
```

### 7. УПРАЖНЕНИЯ

1. Напишите команду AWK, которая преобразует формат FASTA 'interleaved' в FASTA 'sequential' 
2. Напишите команду AWK, которая преобразует формат FASTA 'sequential' в PHYLYP
3. Напишите команду AWK, которая преобразует формат FASTA 'sequential' в NEXUS


